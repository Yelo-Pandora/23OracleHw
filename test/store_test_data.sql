-- 店铺测试数据
-- 用于测试店铺管理功能

-- 清理可能存在的测试数据
DELETE FROM RENT_STORE WHERE STORE_ID IN (2001, 2002, 2003);
DELETE FROM STORE WHERE STORE_ID IN (2001, 2002, 2003);
COMMIT;

-- 验证区域数据是否存在（必须先运行 create_retail_area_test_data.sql）
SELECT '检查区域1003是否存在' as INFO, AREA_ID, AREA_SIZE, ISEMPTY, CATEGORY FROM AREA WHERE AREA_ID = 1003;

-- 插入一些测试店铺数据
-- 注意：需要先有区域数据，建议先运行create_retail_area_test_data.sql

-- 插入店铺数据到STORE表
INSERT INTO STORE (STORE_ID, STORE_NAME, STORE_STATUS, STORE_TYPE, TENANT_NAME, CONTACT_INFO, RENT_START, RENT_END) 
VALUES (2001, '星巴克咖啡', '正常营业', '企业连锁', '星巴克中国', '13800138001', DATE '2024-01-01', DATE '2026-12-31');

INSERT INTO STORE (STORE_ID, STORE_NAME, STORE_STATUS, STORE_TYPE, TENANT_NAME, CONTACT_INFO, RENT_START, RENT_END) 
VALUES (2002, '优衣库服装店', '正常营业', '企业连锁', '优衣库中国', '13800138002', DATE '2024-02-01', DATE '2026-01-31');

INSERT INTO STORE (STORE_ID, STORE_NAME, STORE_STATUS, STORE_TYPE, TENANT_NAME, CONTACT_INFO, RENT_START, RENT_END) 
VALUES (2003, '华为专卖店', '正常营业', '企业连锁', '华为公司', '13800138003', DATE '2024-03-01', DATE '2025-02-28');

-- 提交店铺数据
COMMIT;

-- 验证店铺数据插入成功
SELECT '验证店铺数据' as INFO, STORE_ID, STORE_NAME FROM STORE WHERE STORE_ID IN (2001, 2002, 2003);

-- 验证区域数据存在
SELECT '验证可用区域' as INFO, a.AREA_ID, a.AREA_SIZE, a.ISEMPTY, a.CATEGORY, r.RENT_STATUS 
FROM AREA a 
LEFT JOIN RETAIL_AREA r ON a.AREA_ID = r.AREA_ID 
WHERE a.AREA_ID IN (1001, 1002, 1003);

-- 插入租赁关系数据到RENT_STORE表
-- 使用实际存在的区域（从create_retail_area_test_data.sql）
-- 如果区域1003不存在，改用1001或1002
INSERT INTO RENT_STORE (STORE_ID, AREA_ID) VALUES (2001, 1001);  -- 使用区域1001代替1003

-- 可以添加更多的租赁关系
-- INSERT INTO RENT_STORE (STORE_ID, AREA_ID) VALUES (2002, 1002);
-- INSERT INTO RENT_STORE (STORE_ID, AREA_ID) VALUES (2003, 1001);

COMMIT;

-- 验证插入的数据
SELECT '插入的店铺数据' as INFO, STORE_ID, STORE_NAME, STORE_TYPE, TENANT_NAME, CONTACT_INFO 
FROM STORE 
WHERE STORE_ID IN (2001, 2002, 2003);

SELECT '租赁关系数据' as INFO, r.STORE_ID, r.AREA_ID, s.TENANT_NAME, s.STORE_NAME, a.AREA_SIZE
FROM RENT_STORE r
JOIN STORE s ON r.STORE_ID = s.STORE_ID  
JOIN AREA a ON r.AREA_ID = a.AREA_ID
WHERE r.STORE_ID IN (2001, 2002, 2003);

PROMPT '店铺测试数据插入完成！'
PROMPT '注意：如果租赁关系插入失败，请先运行 create_retail_area_test_data.sql'
PROMPT '- 星巴克咖啡 (ID: 2001) - 尝试分配到区域1001'
PROMPT '- 优衣库服装店 (ID: 2002) - 未分配区域'
PROMPT '- 华为专卖店 (ID: 2003) - 未分配区域'
