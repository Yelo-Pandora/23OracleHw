--------------------------------------------------------
--  文件已创建 - 星期五-七月-25-2025
--  脚本功能：清空所有业务数据并重新插入测试数据
--------------------------------------------------------

-- 切换用户
ALTER SESSION SET CURRENT_SCHEMA = ORACLEDBA;

--------------------------------------------------------
--  1. 清空所有表中的数据
--  (注意：删除顺序与外键约束有关，从子表开始删除)
--------------------------------------------------------
DELETE FROM "TEMP_AUTHORITY";
DELETE FROM "VENUE_EVENT_DETAIL";
DELETE FROM "PART_STORE";
DELETE FROM "RENT_STORE";
DELETE FROM "STAFF_ACCOUNT";
DELETE FROM "STORE_ACCOUNT";
DELETE FROM "SALARY_SLIP";
DELETE FROM "REPAIR_ORDER";
DELETE FROM "PARK";
DELETE FROM "PARKING_SPACE_DISTRIBUTION";
DELETE FROM "EQUIPMENT_LOCATION";
DELETE FROM "SALE_EVENT";
DELETE FROM "VENUE_EVENT";
DELETE FROM "EVENT";
DELETE FROM "CAR";
DELETE FROM "PARKING_SPACE";
DELETE FROM "RETAIL_AREA";
DELETE FROM "EVENT_AREA";
DELETE FROM "PARKING_LOT";
DELETE FROM "OTHER_AREA";
DELETE FROM "AREA";
DELETE FROM "STORE";
DELETE FROM "STAFF";
DELETE FROM "ACCOUNT";
DELETE FROM "MONTH_SALARY_COST";
DELETE FROM "EQUIPMENT";
DELETE FROM "COLLABORATION";

--------------------------------------------------------
--  2. 重新插入测试数据
--------------------------------------------------------

-- 插入父表数据 (无外键或被其他表引用的表)

-- ACCOUNT Table
INSERT INTO "ACCOUNT" ("ACCOUNT", "PASSWORD", "IDENTITY", "USERNAME", "AUTHORITY") VALUES ('admin', 'adminpass', '员工', '系统管理员', 10);
INSERT INTO "ACCOUNT" ("ACCOUNT", "PASSWORD", "IDENTITY", "USERNAME", "AUTHORITY") VALUES ('staff_hr', 'hrpass', '员工', '张三', 5);
INSERT INTO "ACCOUNT" ("ACCOUNT", "PASSWORD", "IDENTITY", "USERNAME", "AUTHORITY") VALUES ('staff_maint', 'maintpass', '员工', '李四', 3);
INSERT INTO "ACCOUNT" ("ACCOUNT", "PASSWORD", "IDENTITY", "USERNAME", "AUTHORITY") VALUES ('merchant01', 'shop01pass', '商户', '美滋滋超市', 1);
INSERT INTO "ACCOUNT" ("ACCOUNT", "PASSWORD", "IDENTITY", "USERNAME", "AUTHORITY") VALUES ('merchant02', 'shop02pass', '商户', '时尚女装', 1);

-- STAFF Table
INSERT INTO "STAFF" ("STAFF_ID", "STAFF_NAME", "STAFF_SEX", "STAFF_APARTMENT", "STAFF_POSITION", "STAFF_SALARY") VALUES (101, '张三', '男', '人力资源部', 'HR经理', 8000.00);
INSERT INTO "STAFF" ("STAFF_ID", "STAFF_NAME", "STAFF_SEX", "STAFF_APARTMENT", "STAFF_POSITION", "STAFF_SALARY") VALUES (102, '李四', '男', '维修部门', '维修工程师', 6500.00);
INSERT INTO "STAFF" ("STAFF_ID", "STAFF_NAME", "STAFF_SEX", "STAFF_APARTMENT", "STAFF_POSITION", "STAFF_SALARY") VALUES (103, '王五', '女', '行政部门', '行政助理', 5000.00);

-- MONTH_SALARY_COST Table
INSERT INTO "MONTH_SALARY_COST" ("MONTH_TIME", "TOTAL_COST") VALUES (TO_DATE('2025-06-01', 'YYYY-MM-DD'), 19500.00);
INSERT INTO "MONTH_SALARY_COST" ("MONTH_TIME", "TOTAL_COST") VALUES (TO_DATE('2025-07-01', 'YYYY-MM-DD'), 20000.00);

-- EQUIPMENT Table
INSERT INTO "EQUIPMENT" ("EQUIPMENT_ID", "EQUIPMENT_TYPE", "EQUIPMENT_STATUS", "PORT", "EQUIPMENT_COST", "BUY_TIME") VALUES (201, '中央空调', '正常', '网络接口', 50000.00, TO_DATE('2023-01-15', 'YYYY-MM-DD'));
INSERT INTO "EQUIPMENT" ("EQUIPMENT_ID", "EQUIPMENT_TYPE", "EQUIPMENT_STATUS", "PORT", "EQUIPMENT_COST", "BUY_TIME") VALUES (202, '监控摄像头', '故障', 'POE', 800.00, TO_DATE('2024-03-10', 'YYYY-MM-DD'));
INSERT INTO "EQUIPMENT" ("EQUIPMENT_ID", "EQUIPMENT_TYPE", "EQUIPMENT_STATUS", "PORT", "EQUIPMENT_COST", "BUY_TIME") VALUES (203, '消防警报器', '正常', 'RS485', 1200.00, TO_DATE('2022-11-20', 'YYYY-MM-DD'));
INSERT INTO "EQUIPMENT" ("EQUIPMENT_ID", "EQUIPMENT_TYPE", "EQUIPMENT_STATUS", "PORT", "EQUIPMENT_COST", "BUY_TIME") VALUES (204, '停车场入口闸机', '维修中', 'Ethernet', 15000.00, TO_DATE('2024-06-01', 'YYYY-MM-DD'));

-- STORE Table
INSERT INTO "STORE" ("STORE_ID", "STORE_NAME", "STORE_STATUS", "STORE_TYPE", "TENANT_NAME", "CONTACT_INFO", "RENT_START", "RENT_END") VALUES (301, '美滋滋超市', '正常营业', '企业连锁', '王小二', '13812345678', TO_DATE('2024-01-01', 'YYYY-MM-DD'), TO_DATE('2026-12-31', 'YYYY-MM-DD'));
INSERT INTO "STORE" ("STORE_ID", "STORE_NAME", "STORE_STATUS", "STORE_TYPE", "TENANT_NAME", "CONTACT_INFO", "RENT_START", "RENT_END") VALUES (302, '时尚女装', '正常营业', '个人', '李丽', '13987654321', TO_DATE('2023-05-01', 'YYYY-MM-DD'), TO_DATE('2025-04-30', 'YYYY-MM-DD'));
INSERT INTO "STORE" ("STORE_ID", "STORE_NAME", "STORE_STATUS", "STORE_TYPE", "TENANT_NAME", "CONTACT_INFO", "RENT_START", "RENT_END") VALUES (303, '咖啡时光', '歇业', '企业连锁', '赵大刚', '13700001111', TO_DATE('2025-03-01', 'YYYY-MM-DD'), TO_DATE('2027-02-28', 'YYYY-MM-DD'));

-- AREA Table
INSERT INTO "AREA" ("AREA_ID", "ISEMPTY", "AREA_SIZE", "CATEGORY") VALUES (401, 0, 150, 'RETAIL');
INSERT INTO "AREA" ("AREA_ID", "ISEMPTY", "AREA_SIZE", "CATEGORY") VALUES (402, 0, 80, 'RETAIL');
INSERT INTO "AREA" ("AREA_ID", "ISEMPTY", "AREA_SIZE", "CATEGORY") VALUES (403, 1, 100, 'RETAIL');
INSERT INTO "AREA" ("AREA_ID", "ISEMPTY", "AREA_SIZE", "CATEGORY") VALUES (404, 0, 500, 'EVENT');
INSERT INTO "AREA" ("AREA_ID", "ISEMPTY", "AREA_SIZE", "CATEGORY") VALUES (405, 0, 1000, 'PARKING');
INSERT INTO "AREA" ("AREA_ID", "ISEMPTY", "AREA_SIZE", "CATEGORY") VALUES (406, 0, 30, 'OTHER');

-- PARKING_SPACE Table
INSERT INTO "PARKING_SPACE" ("PARKING_SPACE_ID", "OCCUPIED") VALUES (501, 1);
INSERT INTO "PARKING_SPACE" ("PARKING_SPACE_ID", "OCCUPIED") VALUES (502, 0);
INSERT INTO "PARKING_SPACE" ("PARKING_SPACE_ID", "OCCUPIED") VALUES (503, 1);
INSERT INTO "PARKING_SPACE" ("PARKING_SPACE_ID", "OCCUPIED") VALUES (504, 0);

-- CAR Table
INSERT INTO "CAR" ("LICENSE_PLATE_NUMBER", "PARK_START", "PARK_END") VALUES ('沪A12345', TO_TIMESTAMP('2025-07-25 08:00:00', 'YYYY-MM-DD HH24:MI:SS'), NULL);
INSERT INTO "CAR" ("LICENSE_PLATE_NUMBER", "PARK_START", "PARK_END") VALUES ('京B67890', TO_TIMESTAMP('2025-07-25 09:30:00', 'YYYY-MM-DD HH24:MI:SS'), NULL);
INSERT INTO "CAR" ("LICENSE_PLATE_NUMBER", "PARK_START", "PARK_END") VALUES ('苏C54321', TO_TIMESTAMP('2025-07-24 18:00:00', 'YYYY-MM-DD HH24:MI:SS'), TO_TIMESTAMP('2025-07-24 22:00:00', 'YYYY-MM-DD HH24:MI:SS'));

-- EVENT Table
INSERT INTO "EVENT" ("EVENT_ID", "EVENT_NAME", "EVENT_START", "EVENT_END") VALUES (601, '夏季大促销', TO_DATE('2025-08-01', 'YYYY-MM-DD'), TO_DATE('2025-08-31', 'YYYY-MM-DD'));
INSERT INTO "EVENT" ("EVENT_ID", "EVENT_NAME", "EVENT_START", "EVENT_END") VALUES (602, '美食节', TO_DATE('2025-09-10', 'YYYY-MM-DD'), TO_DATE('2025-09-15', 'YYYY-MM-DD'));
INSERT INTO "EVENT" ("EVENT_ID", "EVENT_NAME", "EVENT_START", "EVENT_END") VALUES (603, '周年庆典', TO_DATE('2025-10-01', 'YYYY-MM-DD'), TO_DATE('2025-10-07', 'YYYY-MM-DD'));

-- COLLABORATION Table
INSERT INTO "COLLABORATION" ("COLLABORATION_ID", "COLLABORATION_NAME", "CONTACTOR", "PHONE_NUMBER", "EMAIL") VALUES (701, '餐饮管理公司A', '陈经理', '18011112222', 'chen@food.com');
INSERT INTO "COLLABORATION" ("COLLABORATION_ID", "COLLABORATION_NAME", "CONTACTOR", "PHONE_NUMBER", "EMAIL") VALUES (702, '演艺传媒公司B', '林总', '18933334444', 'lin@media.com');

-- 插入依赖于上述表的子表数据

-- STAFF_ACCOUNT Table
INSERT INTO "STAFF_ACCOUNT" ("ACCOUNT", "STAFF_ID") VALUES ('staff_hr', 101);
INSERT INTO "STAFF_ACCOUNT" ("ACCOUNT", "STAFF_ID") VALUES ('staff_maint', 102);
INSERT INTO "STAFF_ACCOUNT" ("ACCOUNT", "STAFF_ID") VALUES ('admin', 101);

-- SALARY_SLIP Table
INSERT INTO "SALARY_SLIP" ("STAFF_ID", "MONTH_TIME", "ATD_COUNT", "BONUS", "FINE") VALUES (101, TO_DATE('2025-06-01', 'YYYY-MM-DD'), 22, 1000.00, 0.00);
INSERT INTO "SALARY_SLIP" ("STAFF_ID", "MONTH_TIME", "ATD_COUNT", "BONUS", "FINE") VALUES (102, TO_DATE('2025-06-01', 'YYYY-MM-DD'), 21, 500.00, 50.00);
INSERT INTO "SALARY_SLIP" ("STAFF_ID", "MONTH_TIME", "ATD_COUNT", "BONUS", "FINE") VALUES (103, TO_DATE('2025-06-01', 'YYYY-MM-DD'), 22, 200.00, 0.00);
INSERT INTO "SALARY_SLIP" ("STAFF_ID", "MONTH_TIME", "ATD_COUNT", "BONUS", "FINE") VALUES (101, TO_DATE('2025-07-01', 'YYYY-MM-DD'), 20, 1200.00, 0.00);
INSERT INTO "SALARY_SLIP" ("STAFF_ID", "MONTH_TIME", "ATD_COUNT", "BONUS", "FINE") VALUES (102, TO_DATE('2025-07-01', 'YYYY-MM-DD'), 22, 600.00, 0.00);
INSERT INTO "SALARY_SLIP" ("STAFF_ID", "MONTH_TIME", "ATD_COUNT", "BONUS", "FINE") VALUES (103, TO_DATE('2025-07-01', 'YYYY-MM-DD'), 21, 300.00, 20.00);

-- REPAIR_ORDER Table
INSERT INTO "REPAIR_ORDER" ("EQUIPMENT_ID", "STAFF_ID", "REPAIR_START", "REPAIR_END", "REPAIR_COST") VALUES (202, 102, TO_DATE('2025-07-20', 'YYYY-MM-DD'), TO_DATE('2025-07-22', 'YYYY-MM-DD'), 150.00);
INSERT INTO "REPAIR_ORDER" ("EQUIPMENT_ID", "STAFF_ID", "REPAIR_START", "REPAIR_END", "REPAIR_COST") VALUES (204, 102, TO_DATE('2025-07-24', 'YYYY-MM-DD'), NULL, 300.00);

-- STORE_ACCOUNT Table
INSERT INTO "STORE_ACCOUNT" ("ACCOUNT", "STORE_ID") VALUES ('merchant01', 301);
INSERT INTO "STORE_ACCOUNT" ("ACCOUNT", "STORE_ID") VALUES ('merchant02', 302);

-- RETAIL_AREA Table
INSERT INTO "RETAIL_AREA" ("AREA_ID", "RENT_STATUS", "BASE_RENT") VALUES (401, '已出租', 15000.00);
INSERT INTO "RETAIL_AREA" ("AREA_ID", "RENT_STATUS", "BASE_RENT") VALUES (402, '已出租', 8000.00);
INSERT INTO "RETAIL_AREA" ("AREA_ID", "RENT_STATUS", "BASE_RENT") VALUES (403, '待租', 10000.00);

-- EVENT_AREA Table
INSERT INTO "EVENT_AREA" ("AREA_ID", "CAPACITY", "AREA_FEE") VALUES (404, 300, 20000.00);

-- PARKING_LOT Table
INSERT INTO "PARKING_LOT" ("AREA_ID", "PARKING_FEE") VALUES (405, 5.00);

-- OTHER_AREA Table
INSERT INTO "OTHER_AREA" ("AREA_ID", "TYPE") VALUES (406, '卫生间');

-- EQUIPMENT_LOCATION Table
INSERT INTO "EQUIPMENT_LOCATION" ("EQUIPMENT_ID", "AREA_ID") VALUES (201, 404);
INSERT INTO "EQUIPMENT_LOCATION" ("EQUIPMENT_ID", "AREA_ID") VALUES (202, 401);
INSERT INTO "EQUIPMENT_LOCATION" ("EQUIPMENT_ID", "AREA_ID") VALUES (203, 406);
INSERT INTO "EQUIPMENT_LOCATION" ("EQUIPMENT_ID", "AREA_ID") VALUES (204, 405);

-- PARK Table
INSERT INTO "PARK" ("LICENSE_PLATE_NUMBER", "PARKING_SPACE_ID", "PARK_START") VALUES ('沪A12345', 501, TO_TIMESTAMP('2025-07-25 08:00:00', 'YYYY-MM-DD HH24:MI:SS'));
INSERT INTO "PARK" ("LICENSE_PLATE_NUMBER", "PARKING_SPACE_ID", "PARK_START") VALUES ('京B67890', 503, TO_TIMESTAMP('2025-07-25 09:30:00', 'YYYY-MM-DD HH24:MI:SS'));

-- PARKING_SPACE_DISTRIBUTION Table
INSERT INTO "PARKING_SPACE_DISTRIBUTION" ("AREA_ID", "PARKING_SPACE_ID") VALUES (405, 501);
INSERT INTO "PARKING_SPACE_DISTRIBUTION" ("AREA_ID", "PARKING_SPACE_ID") VALUES (405, 502);
INSERT INTO "PARKING_SPACE_DISTRIBUTION" ("AREA_ID", "PARKING_SPACE_ID") VALUES (405, 503);
INSERT INTO "PARKING_SPACE_DISTRIBUTION" ("AREA_ID", "PARKING_SPACE_ID") VALUES (405, 504);

-- SALE_EVENT Table
INSERT INTO "SALE_EVENT" ("EVENT_ID", "COST", "DESCRIPTION") VALUES (601, 10000.00, '全场商品8折起，满减优惠。');
INSERT INTO "SALE_EVENT" ("EVENT_ID", "COST", "DESCRIPTION") VALUES (603, 50000.00, '商场成立十周年，大型促销活动，包含抽奖和表演。');

-- VENUE_EVENT Table
INSERT INTO "VENUE_EVENT" ("EVENT_ID", "HEADCOUNT", "FEE", "CAPACITY", "EXPENSE") VALUES (602, 0, 50.00, 200, 15000.00);

-- RENT_STORE Table
INSERT INTO "RENT_STORE" ("STORE_ID", "AREA_ID") VALUES (301, 401);
INSERT INTO "RENT_STORE" ("STORE_ID", "AREA_ID") VALUES (302, 402);

-- PART_STORE Table
INSERT INTO "PART_STORE" ("EVENT_ID", "STORE_ID") VALUES (601, 301);
INSERT INTO "PART_STORE" ("EVENT_ID", "STORE_ID") VALUES (601, 302);
INSERT INTO "PART_STORE" ("EVENT_ID", "STORE_ID") VALUES (603, 301);
INSERT INTO "PART_STORE" ("EVENT_ID", "STORE_ID") VALUES (603, 303);

-- VENUE_EVENT_DETAIL Table
INSERT INTO "VENUE_EVENT_DETAIL" ("EVENT_ID", "AREA_ID", "COLLABORATION_ID", "RENT_START", "RENT_END", "STATUS", "FUNDING") VALUES (602, 404, 701, TO_DATE('2025-09-10', 'YYYY-MM-DD'), TO_DATE('2025-09-15', 'YYYY-MM-DD'), '已预订', 8000.00);

-- TEMP_AUTHORITY Table
INSERT INTO "TEMP_AUTHORITY" ("ACCOUNT", "EVENT_ID", "TEMP_AUTHORITY", "AUTHORITY_CONTENT") VALUES ('staff_hr', 602, 2, '管理美食节入场人员');
INSERT INTO "TEMP_AUTHORITY" ("ACCOUNT", "EVENT_ID", "TEMP_AUTHORITY", "AUTHORITY_CONTENT") VALUES ('staff_maint', 602, 1, '美食节期间设备紧急维护');


-- 提交事务
COMMIT;

--------------------------------------------------------
--  3. (可选) 验证数据插入情况
--------------------------------------------------------
SELECT 'ACCOUNT' as "TABLE_NAME", COUNT(*) as "ROW_COUNT" FROM "ACCOUNT" UNION ALL
SELECT 'STAFF', COUNT(*) FROM "STAFF" UNION ALL
SELECT 'STORE', COUNT(*) FROM "STORE" UNION ALL
SELECT 'AREA', COUNT(*) FROM "AREA" UNION ALL
SELECT 'EVENT', COUNT(*) FROM "EVENT" UNION ALL
SELECT 'CAR', COUNT(*) FROM "CAR" UNION ALL
SELECT 'EQUIPMENT', COUNT(*) FROM "EQUIPMENT"
ORDER BY "TABLE_NAME";